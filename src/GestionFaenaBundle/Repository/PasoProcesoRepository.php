<?php

namespace GestionFaenaBundle\Repository;

/**
 * PasoProcesoRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class PasoProcesoRepository extends \Doctrine\ORM\EntityRepository
{

	public function findPasoProceso(\GestionFaenaBundle\Entity\ProcesoFaena $proceso,
									\GestionFaenaBundle\Entity\GrupoMovimientosAutomatico $grupo) 
	{ 
	    return $this->createQueryBuilder('g')
			        ->where('g.procesoFaena = :proceso')
			        ->andWhere('g.grupoMovimiento = :grupo')
			        ->andWhere('g.eliminado = :eliminado')
			        ->setParameter('proceso', $proceso)
			        ->setParameter('grupo', $grupo)
			        ->setParameter('eliminado', false)
			        ->getQuery()
			        ->getOneOrNullResult(); 
	} 

	public function findPasoProcesoArtAtrConc(\GestionFaenaBundle\Entity\ProcesoFaena $proceso,
											  \GestionFaenaBundle\Entity\gestionBD\ArticuloAtributoConcepto $articulo) 
	{ 
	    return $this->createQueryBuilder('g')
			        ->where('g.procesoFaena = :proceso')
			        ->andWhere('g.articuloAtributoConcepto = :articulo')
			        ->andWhere('g.eliminada = :eliminado')
			        ->setParameter('proceso', $proceso)
			        ->setParameter('articulo', $articulo)
			        ->setParameter('eliminado', false)
			        ->getQuery()
			        ->getOneOrNullResult(); 
	} 
}
